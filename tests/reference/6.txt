^1^T^Sm^Sd^Ss^S2.5.7^SwagoID^SB1pfxTOtb^Sd^T^SyOffset^N127^Sversion^N23^Sid^SPhoGuild~`-~`Raid~`Ability~`Timeline^SxOffset^N-291^Sdisjunctive^Sall^SregionType^Sgroup^Sdesc^SMade~`by:~`Bosmutus~`-~`Zul'jin(US)^SactiveTriggerMode^N-10^SselfPoint^SBOTTOMLEFT^Sload^T^Sdifficulty^T^Smulti^T^t^t^Sfaction^T^Smulti^T^t^t^Stalent^T^Smulti^T^t^t^Srace^T^Smulti^T^t^t^Suse_class^b^Srole^T^Smulti^T^t^t^Stalent2^T^Smulti^T^t^t^Singroup^T^Smulti^T^t^t^Spvptalent^T^Smulti^T^t^t^t^Surl^Shttps://wago.io/B1pfxTOtb/23^Sexpanded^B^Strigger^T^SshowOn^SshowOnActive^t^SnumTriggers^N1^t^Sv^N1421^Sa^T^t^Sc^T^N1^T^ScustomTextUpdate^Sevent^Soutline^SOUTLINE^Stext2Font^SPT~`Sans~`Narrow^Stext1Containment^SOUTSIDE^Sadditional_triggers^T^N1^T^Suntrigger^T^t^Strigger^T^Sunit^Splayer^Sunevent^Sauto^Stype^Sstatus^Suse_alwaystrue^B^Sevent^SConditions^SsubeventPrefix^SSPELL^SsubeventSuffix^S_CAST_START^Scustom_type^Sstatus^Suse_unit^B^t^t^t^Stext1Point^SLEFT^Sfont^SFriz~`Quadrata~`TT^SregionType^Sicon^Sanimation^T^Smain^T^ScolorA^N1^Sx^N0^StranslateFunc^Sfunction(progress,~`startX,~`startY,~`deltaX,~`deltaY)~J~`~`~`~`local~`endX,endY~J~`~`~`~`if~`not~`aura_env.state~`then~J~`~`~`~`~`~`~`~`endX~`=~`startX~J~`~`~`~`~`~`~`~`endY~`=~`startY~`~J~`~`~`~`elseif~`(aura_env.totalDur~`or~`0)>0~`and~`aura_env.state.expirationTime-GetTime()>aura_env.totalDur~`then~J~`~`~`~`~`~`~`~`endX~`=~`startX~J~`~`~`~`~`~`~`~`endY~`=~`startY+GetScreenHeight()~J~`~`~`~`elseif~`aura_env.state.c_queued~`then~J~`~`~`~`~`~`~`~`endX~`=~`startX~J~`~`~`~`~`~`~`~`endY~`=~`startY~`+~`(aura_env.state.c_offset~`or~`0)~J~`~`~`~`else~J~`~`~`~`~`~`~`~`local~`prog=1~J~`~`~`~`~`~`~`~`if~`aura_env.state.expirationTime~`then~J~`~`~`~`~`~`~`~`~`~`~`~`prog~`=~`(aura_env.state.expirationTime~`-~`GetTime())/aura_env.maxDur~J~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`if~`prog>1~`then~`prog=1~J~`~`~`~`~`~`~`~`elseif~`prog<0~`then~`prog=0~`end~J~`~`~`~`~`~`~`~`endX~`=~`startX~J~`~`~`~`~`~`~`~`endY~`=~`startY~`-~`((1-prog)~`*~`aura_env.travelDist)~`-~`(aura_env.state.c_offset~`or~`0)~J~`~`~`~`end~J~`~`~`~`if~`aura_env.reverse~`then~`endY~`=~`-aura_env.travelDist-endY~`end~J~`~`~`~`return~`endX,endY~Jend^Sy^N0^Sscaley^N1^Sscalex^N1^StranslateType^Scustom^ScolorG^N1^Stype^Scustom^Salpha^N0^Srotate^N0^ScolorR^N1^ScolorB^N1^Suse_translate^B^t^t^SactiveTriggerMode^N0^Stext2FontSize^N16^Sheight^N25^Surl^Shttps://wago.io/B1pfxTOtb/23^Strigger^T^Scustom^Sfunction(allstates,~`WAevent,~`event,~`id,~`msg,~`exp,~`icon,~`colors)~J~`~`~`~`if~`event~`==~`"START"~`then~J~`~`~`~`~`~`~`~`if~`not~`id~`then~`return~`end~J~`~`~`~`~`~`~`~`aura_env.hideDBMBarsHelper()~`--~`Sometimes~`DBM~`will~`revert~`the~`screen~`clamping.~J~`~`~`~`~`~`~`~`allstates[id]~`=~`allstates[id]~`or~`{}~J~`~`~`~`~`~`~`~`local~`state~`=~`allstates[id]~J~`~`~`~`~`~`~`~`state.name~`=~`msg~J~`~`~`~`~`~`~`~`state.icon~`=~`icon~`~`~`~`~J~`~`~`~`~`~`~`~`state.progressType~`=~`"timed"~J~`~`~`~`~`~`~`~`state.expirationTime~`=~`exp~J~`~`~`~`~`~`~`~`state.duration~`=~`exp-GetTime()~J~`~`~`~`~`~`~`~`state.colorTable~`=~`colors~J~`~`~`~`~`~`~`~`state.c_offset~`=~`0~J~`~`~`~`~`~`~`~`state.autoHide~`=~`true~J~`~`~`~`~`~`~`~`state.changed~`=~`true~J~`~`~`~`~`~`~`~`state.show~`=~`true~J~`~`~`~`~`~`~`~`local~`now~`=~`GetTime()~J~`~`~`~`~`~`~`~`if~`exp~`<~`now~`+~`aura_env.maxDur~`then~J~`~`~`~`~`~`~`~`~`~`~`~`state.c_queued=false~J~`~`~`~`~`~`~`~`else~J~`~`~`~`~`~`~`~`~`~`~`~`state.c_queued=true~J~`~`~`~`~`~`~`~`~`~`~`~`C_Timer.After(exp-now-aura_env.maxDur,~`function()~`WeakAuras.ScanEvents("PHOGUILD_RAT","REFRESH",id)~`end)~J~`~`~`~`~`~`~`~`end~J~`~`~`~`elseif~`event=="STOP"~`then~J~`~`~`~`~`~`~`~`if~`not~`id~`then~`return~`end~J~`~`~`~`~`~`~`~`allstates[id]~`=~`allstates[id]~`or~`{}~J~`~`~`~`~`~`~`~`local~`state~`=~`allstates[id]~J~`~`~`~`~`~`~`~`state.show=false~J~`~`~`~`~`~`~`~`state.changed=true~J~`~`~`~`elseif~`event=="UPDATEPROG"~`then~J~`~`~`~`~`~`~`~`if~`not~`id~`then~`return~`end~J~`~`~`~`~`~`~`~`local~`state~`=~`allstates[id]~J~`~`~`~`~`~`~`~`if~`state~`then~J~`~`~`~`~`~`~`~`~`~`~`~`state.duration~`=~`msg~J~`~`~`~`~`~`~`~`~`~`~`~`state.expirationTime~`=~`exp~J~`~`~`~`~`~`~`~`~`~`~`~`local~`now~`=~`GetTime()~J~`~`~`~`~`~`~`~`~`~`~`~`if~`exp~`<~`now~`+~`aura_env.maxDur~`then~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`state.c_queued=false~J~`~`~`~`~`~`~`~`~`~`~`~`else~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`state.c_queued=true~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`C_Timer.After(exp-now-aura_env.maxDur,~`function()~`WeakAuras.ScanEvents("PHOGUILD_RAT","REFRESH",id)~`end)~J~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`~`~`~`~`state.changed~`=~`true~J~`~`~`~`~`~`~`~`end~J~`~`~`~`elseif~`event=="FORCESTOP"~`then~J~`~`~`~`~`~`~`~`--~`This~`is~`called~`from~`DBM.Bars:CancelBar~`function~`hook~`callback.~J~`~`~`~`~`~`~`~`--~`This~`needs~`to~`be~`removed~`once~`we~`are~`100%~`confident~`that~`DBM_TimerStop~`event~`will~`fire~`for~`everything~J~`~`~`~`~`~`~`~`if~`not~`id~`then~`return~`end~J~`~`~`~`~`~`~`~`local~`state~`=~`allstates[id]~J~`~`~`~`~`~`~`~`if~`state~`then~J~`~`~`~`~`~`~`~`~`~`~`~`state.show=false~J~`~`~`~`~`~`~`~`~`~`~`~`state.changed=true~J~`~`~`~`~`~`~`~`else~J~`~`~`~`~`~`~`~`~`~`~`~`for~`_,state~`in~`pairs(allstates)~`do~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`if~`state.name~`==~`id~`then~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`state.show=false~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`state.changed=true~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`break~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`end~J~`~`~`~`elseif~`event=="STOPALL"~`then~J~`~`~`~`~`~`~`~`for~`cid,state~`in~`pairs(allstates)~`do~J~`~`~`~`~`~`~`~`~`~`~`~`if~`not~`id~`or~`tostring(id)==strsplit("~}",cid)~`then~`--With~`BW,~`id~`(called~`module~`in~`BW)~`can~`be~`a~`table~`here~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`state.show=false~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`state.changed=true~J~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`end~J~`~`~`~`elseif~`event=="REFRESH"~`then~J~`~`~`~`~`~`~`~`if~`not~`allstates[id]~`then~`return~`end~J~`~`~`~`~`~`~`~`--~`For~`performance~`reasons,~`we~`are~`not~`canceling~`the~`REFRESH~`callbacks~`when~`events~`are~`canceled.~`~J~`~`~`~`~`~`~`~`--~`Therefore~`we~`need~`to~`disregard~`the~`ones~`that~`are~`leaked~`from~`the~`previous~`pull.~J~`~`~`~`~`~`~`~`local~`timeLeft~`=~`(allstates[id].expirationTime~`or~`0)~`-~`GetTime()~J~`~`~`~`~`~`~`~`if~`(aura_env.maxDur~`or~`0)-timeLeft~`>~`0.5~`or~`(aura_env.maxDur~`or~`0)-timeLeft~`<~`-0.1~`then~`return~`end~J~`~`~`~`~`~`~`~`allstates[id].c_offset=0~J~`~`~`~`~`~`~`~`allstates[id].c_queued=false~J~`~`~`~`~`~`~`~`allstates[id].changed=true~J~`~`~`~`end~J~`~`~`~`--~`Refresh~`and~`recalculate~`offset~J~`~`~`~`local~`queuedEvents={}~J~`~`~`~`local~`events={}~J~`~`~`~`--~`Sort~`everything~`by~`exp~J~`~`~`~`for~`id,state~`in~`pairs(allstates)~`do~J~`~`~`~`~`~`~`~`if~`state.c_queued~`then~J~`~`~`~`~`~`~`~`~`~`~`~`table.insert(queuedEvents,{id=id,exp=state.expirationTime})~J~`~`~`~`~`~`~`~`else~J~`~`~`~`~`~`~`~`~`~`~`~`table.insert(events,{id=id,exp=state.expirationTime})~J~`~`~`~`~`~`~`~`end~J~`~`~`~`end~J~`~`~`~`table.sort(queuedEvents,function(a,b)~`return~`(a.exp~`or~`0)<(b.exp~`or~`0)~`end)~J~`~`~`~`table.sort(events,function(a,b)~`return~`(a.exp~`or~`0)<(b.exp~`or~`0)~`end)~J~`~`~`~`--~`Calculate~`offset~`for~`queued~`events~J~`~`~`~`for~`i,event~`in~`ipairs(queuedEvents)~`do~J~`~`~`~`~`~`~`~`allstates[event.id].c_offset=i*aura_env.spacing~J~`~`~`~`end~J~`~`~`~`--~`Calculate~`offset~`for~`the~`regluar~`events~`to~`prevent~`icon~`collision~J~`~`~`~`for~`i=#events,1,-1~`do~J~`~`~`~`~`~`~`~`local~`event=events[i]~J~`~`~`~`~`~`~`~`local~`lastEvent~`=~`events[i+1]~J~`~`~`~`~`~`~`~`if~`lastEvent~`then~J~`~`~`~`~`~`~`~`~`~`~`~`allstates[event.id].c_offset~`=~`aura_env.spacing~`-~`~J~`~`~`~`~`~`~`~`~`~`~`~`(((allstates[lastEvent.id].expirationTime~`or~`0)-(allstates[event.id].expirationTime~`or~`0))~`*~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`aura_env.travelDist~`/~`aura_env.maxDur~`-~`(allstates[lastEvent.id].c_offset~`or~`0))~J~`~`~`~`~`~`~`~`~`~`~`~`--~`offset~`must~`be~`positive~J~`~`~`~`~`~`~`~`~`~`~`~`if~`allstates[event.id].c_offset~`<~`0~`then~`allstates[event.id].c_offset~`=~`0~`end~J~`~`~`~`~`~`~`~`end~J~`~`~`~`end~J~`~`~`~`return~`true~Jend^Sunevent^Sauto^Sevents^SPHOGUILD_RAT^Sevent^SChat~`Message^Stype^Scustom^Scustom_type^Sstateupdate^Scustom_hide^Stimed^Scheck^Sevent^t^Swidth^N25^SprogressPrecision^N4^Stext2Enabled^B^Sdisjunctive^Sall^Sinit_started^N1^Sid^SPhoGuild~`-~`Raid~`Ability~`Timeline~`Icon^Sjustify^SLEFT^ScustomText^Sfunction()~J~`~`~`~`if~`not~`aura_env.state~`then~`return~`end~J~`~`~`~`local~`text~`=~`aura_env.state.name~J~`~`~`~`text~`=~`strtrim(text)~`--~`Trim~J~`~`~`~`local~`inlineIconAdjust~`=~`string.len(string.match(text,"|T.-|t")~`or~`"")~J~`~`~`~`if~`inlineIconAdjust~`>~`0~`then~`inlineIconAdjust~`=~`inlineIconAdjust~`-~`2~`end~`--~`Make~`icons~`take~`2~`characters.~J~`~`~`~`if~`(aura_env.textMaxLength~`or~`0)>=5~`and~`text:len()-inlineIconAdjust>aura_env.textMaxLength~`then~J~`~`~`~`~`~`~`~`text~`=~`string.sub(text,1,aura_env.textMaxLength+inlineIconAdjust-2)..".."~`--~`Truncate~J~`~`~`~`end~J~`~`~`~`if~`aura_env.state.colorTable~`then~J~`~`~`~`~`~`~`~`local~`t=aura_env.state.colorTable~J~`~`~`~`~`~`~`~`text~`=~`string.format("\124c%02x%02x%02x%02x%s\124r",255*(t[4]~`or~`1),255*(t[1]~`or~`0),255*(t[2]~`or~`0),255*(t[3]~`or~`0),text)~J~`~`~`~`end~J~`~`~`~`return~`text~Jend^Stext1Font^SArial~`Narrow^Stext1^S%c^Sdesc^SMade~`by:~`Bosmutus~`-~`Zul'jin(US)^Sload^T^Suse_never^b^Sfaction^T^Smulti^T^t^t^Singroup^T^Smulti^T^t^t^Srace^T^Smulti^T^t^t^Srole^T^Smulti^T^t^t^Stalent2^T^Smulti^T^t^t^Stalent^T^Smulti^T^t^t^Sdifficulty^T^Smulti^T^t^t^Spvptalent^T^Smulti^T^t^t^t^SdisplayText^S%p^Scooldown^b^Stext1FontSize^N15^SnumTriggers^N2^Sactions^T^Sinit^T^Scustom^S--~`Made~`by:~`Bosmutus~`-~`Zul'jin(US)~`--~J~J-----~`Customization~`-----~J--~`Show~`the~`timers~`only~`if~`the~`remaining~`cooldown~`is~`less~`than~`this~`value,~`Set~`to~`0~`to~`always~`show~`all~`timers~Jaura_env.totalDur=0~J--~`The~`time~`threshold~`at~`which~`the~`icons~`start~`moving~`down~Jaura_env.maxDur=10~J--~`The~`total~`travel~`distance~`of~`the~`icons.~`You~`will~`also~`need~`to~`manually~`change~`the~`length~`of~`the~`line~`in~`the~`background.~Jaura_env.travelDist=200~J--~`Icon~`spacing.~`This~`should~`be~`the~`icon~`size~`if~`you~`ever~`change~`that~`in~`the~`display~`tab.~`~Jaura_env.spacing=25~J--~`Max~`length~`of~`the~`text~`by~`the~`icon.~`Text~`longer~`than~`this~`will~`be~`truncated~`and~`followed~`by~`".."~J--~`Set~`to~`0~`to~`disable~`truncating~`text.~Jaura_env.textMaxLength=20~J--~`Hide~`the~`default~`DBM~`bars~Jaura_env.hideDBMBars=true~J--~`Hide~`the~`default~`BW~`bars~Jaura_env.hideBWBars=true~J--~`Set~`to~`true~`to~`make~`the~`icons~`go~`upwards~Jaura_env.reverse=false~J~J-----~`Don't~`Edit~`Anything~`Below~`-----~Jaura_env.DBMCallback~`=~`function(event,~`id,~`msg,~`duration,~`icon,~`timerType,~`spellId,~`colorId)~J~`~`~`~`if~`event=="DBM_TimerStart"~`then~J~`~`~`~`~`~`~`~`--~`Get~`DBM~`bar~`color~J~`~`~`~`~`~`~`~`local~`barOptions=DBM.Bars.options~J~`~`~`~`~`~`~`~`local~`barRed=0~J~`~`~`~`~`~`~`~`local~`barGreen=0~J~`~`~`~`~`~`~`~`local~`barBlue=0~J~`~`~`~`~`~`~`~`if~`colorId~`==~`1~`then--Add~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorAR,~`barOptions.StartColorAG,~`barOptions.StartColorAB~J~`~`~`~`~`~`~`~`elseif~`colorId~`==~`2~`then--AOE~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorAER,~`barOptions.StartColorAEG,~`barOptions.StartColorAEB~J~`~`~`~`~`~`~`~`elseif~`colorId~`==~`3~`then--Debuff~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorDR,~`barOptions.StartColorDG,~`barOptions.StartColorDB~J~`~`~`~`~`~`~`~`elseif~`colorId~`==~`4~`then--Interrupt~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorIR,~`barOptions.StartColorIG,~`barOptions.StartColorIB~J~`~`~`~`~`~`~`~`elseif~`colorId~`==~`5~`then--Role~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorRR,~`barOptions.StartColorRG,~`barOptions.StartColorRB~J~`~`~`~`~`~`~`~`elseif~`colorId~`==~`6~`then--Phase~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorPR,~`barOptions.StartColorPG,~`barOptions.StartColorPB~J~`~`~`~`~`~`~`~`elseif~`colorId~`==~`7~`then--Important~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorUIR,~`barOptions.StartColorUIG,~`barOptions.StartColorUIB~J~`~`~`~`~`~`~`~`else~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorR,~`barOptions.StartColorG,~`barOptions.StartColorB~J~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`WeakAuras.ScanEvents("PHOGUILD_RAT","START",id,msg,GetTime()+(duration~`or~`0),icon,{barRed,barGreen,barBlue})~J~`~`~`~`elseif~`event=="DBM_TimerUpdate"~`then~J~`~`~`~`~`~`~`~`--~`DBM~`Args:~`fireEvent("DBM_TimerUpdate",~`id,~`elapsed,~`total+extendAmount)~J~`~`~`~`~`~`~`~`--~`UPDATEPROG~`Args:~`id,newDuration,newExpiration~J~`~`~`~`~`~`~`~`WeakAuras.ScanEvents("PHOGUILD_RAT","UPDATEPROG",id,duration,GetTime()+(duration~`or~`0)-(msg~`or~`0))~J~`~`~`~`elseif~`event=="DBM_TimerStop"~`then~J~`~`~`~`~`~`~`~`WeakAuras.ScanEvents("PHOGUILD_RAT","STOP",id,msg,0,icon)~J~`~`~`~`end~Jend~J--[[~Jaura_env.DBMHideDefaultBar~`=~`function(event,~`id,~`msg,~`duration,~`icon,~`timerType,~`spellId,~`colorId)~J~`~`~`~`local~`defaultBar~`=~`DBM.Bars:GetBar(id)~J~`~`~`~`if~`not~`defaultBar~`then~`defaultBar~`=~`DBM.Bars:GetBar(msg)~`end~J~`~`~`~`if~`defaultBar~`then~`defaultBar.frame:Hide()~`end~Jend~J]]~J~J--[[~`One~`day~`we'll~`make~`this~`shit~`work~Jif~`DBT~`then~J~`~`~`~`hooksecurefunc(DBT,"CreateBar",~J~`~`~`~`~`~`~`~`function(self,timer,~`id,~`icon,~`huge,~`small,~`color,~`isDummy,~`colorType,~`inlineIcon)~J~`~`~`~`~`~`~`~`~`~`~`~`if~`isDummy~`then~`return~`end~J~`~`~`~`~`~`~`~`~`~`~`~`print(color)~J~`~`~`~`~`~`~`~`~`~`~`~`local~`barOptions=DBM.Bars.options~J~`~`~`~`~`~`~`~`~`~`~`~`local~`barRed=0~J~`~`~`~`~`~`~`~`~`~`~`~`local~`barGreen=0~J~`~`~`~`~`~`~`~`~`~`~`~`local~`barBlue=0~J~`~`~`~`~`~`~`~`~`~`~`~`ViragDevTool_AddData(timer,"timer")~J~`~`~`~`~`~`~`~`~`~`~`~`barRed,~`barGreen,~`barBlue~`=~`barOptions.StartColorR,~`barOptions.StartColorG,~`barOptions.StartColorB~J~`~`~`~`~`~`~`~`~`~`~`~`WeakAuras.ScanEvents("PHOGUILD_RAT","START_CREATEBAR",id,id,GetTime()+(timer~`or~`0),icon,{barRed,barGreen,barBlue})~J~`~`~`~`~`~`~`~`end~J~`~`~`~`)~Jend~J]]~Jif~`DBM~`and~`DBM.Bars~`then~J~`~`~`~`hooksecurefunc(DBM.Bars,"CancelBar",~J~`~`~`~`~`~`~`~`function(self,~`id)~J~`~`~`~`~`~`~`~`~`~`~`~`WeakAuras.ScanEvents("PHOGUILD_RAT","FORCESTOP",id)~J~`~`~`~`~`~`~`~`end~J~`~`~`~`)~Jend~J~Jaura_env.hideDBMBarsHelper=function()~J~`~`~`~`if~`DBM~`and~`DBM.Bars~`then~J~`~`~`~`~`~`~`~`if~`aura_env.hideDBMBars~`then~J~`~`~`~`~`~`~`~`~`~`~`~`--~`DBM~`will~`anchor~`to~`the~`closest~`anchor~`point~`on~`the~`screen~J~`~`~`~`~`~`~`~`~`~`~`~`--~`So~`a~`valid~`offset~`really~`shouldn't~`be~`more~`than~`+/-~`1/4~`of~`the~`screen~`resolution~J~`~`~`~`~`~`~`~`~`~`~`~`local~`point,relativeTo,relativePoint,xOffset,yOffset=DBM.Bars.mainAnchor:GetPoint(1)~J~`~`~`~`~`~`~`~`~`~`~`~`if~`yOffset<GetScreenHeight()/2~`then~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`DBM.Bars.mainAnchor:SetClampedToScreen(false)~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`DBM.Bars.mainAnchor:SetPoint(point,relativeTo,relativePoint,xOffset,yOffset+GetScreenHeight())~J~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`~`~`~`~`point,relativeTo,relativePoint,xOffset,yOffset=DBM.Bars.secAnchor:GetPoint(1)~J~`~`~`~`~`~`~`~`~`~`~`~`if~`yOffset<GetScreenHeight()/2~`then~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`DBM.Bars.secAnchor:SetClampedToScreen(false)~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`DBM.Bars.secAnchor:SetPoint(point,relativeTo,relativePoint,xOffset,yOffset+GetScreenHeight())~J~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`else~J~`~`~`~`~`~`~`~`~`~`~`~`--~`Try~`restore~`the~`original~`offsets~J~`~`~`~`~`~`~`~`~`~`~`~`local~`point,relativeTo,relativePoint,xOffset,yOffset=DBM.Bars.mainAnchor:GetPoint(1)~J~`~`~`~`~`~`~`~`~`~`~`~`if~`yOffset>GetScreenHeight()/2~`then~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`DBM.Bars.mainAnchor:SetPoint(point,relativeTo,relativePoint,xOffset,yOffset-GetScreenHeight())~J~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`~`~`~`~`point,relativeTo,relativePoint,xOffset,yOffset=DBM.Bars.secAnchor:GetPoint(1)~J~`~`~`~`~`~`~`~`~`~`~`~`if~`yOffset>GetScreenHeight()/2~`then~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`DBM.Bars.secAnchor:SetPoint(point,relativeTo,relativePoint,xOffset,yOffset-GetScreenHeight())~J~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`end~J~`~`~`~`end~Jend~Jaura_env.hideDBMBarsHelper()~J~Jif~`DBM~`and~`not~`DBM:IsCallbackRegistered("DBM_TimerStart",~`aura_env.DBMCallback)~`then~`~J~`~`~`~`DBM:RegisterCallback("DBM_TimerStart",aura_env.DBMCallback)~Jend~Jif~`DBM~`and~`not~`DBM:IsCallbackRegistered("DBM_TimerUpdate",~`aura_env.DBMCallback)~`then~`~J~`~`~`~`DBM:RegisterCallback("DBM_TimerUpdate",aura_env.DBMCallback)~Jend~J--[[~Jif~`DBM~`and~`aura_env.hideDBMBars~`and~`not~`DBM:IsCallbackRegistered("DBM_TimerStart",~`aura_env.DBMHideDefaultBar)~`then~`~J~`~`~`~`DBM:RegisterCallback("DBM_TimerStart",aura_env.DBMHideDefaultBar)~Jend~`~`~`~J]]~`~Jif~`DBM~`and~`not~`DBM:IsCallbackRegistered("DBM_TimerStop",~`aura_env.DBMCallback)~`then~`~J~`~`~`~`DBM:RegisterCallback("DBM_TimerStop",aura_env.DBMCallback)~Jend~J~Jaura_env.BigwigsCallback~`=~`function(event,~`...)~J~`~`~`~`if~`event=="BigWigs_StartBar"~`then~J~`~`~`~`~`~`~`~`local~`module,~`spellId,~`msg,~`duration,~`icon~`=~`...~J~`~`~`~`~`~`~`~`local~`r,g,b,a=BigWigs:GetPlugin("Colors"):GetColor("barText",~`module,spellId)~J~`~`~`~`~`~`~`~`WeakAuras.ScanEvents("PHOGUILD_RAT","START",tostring(module).."~}"..(msg~`or~`""),msg,GetTime()+(duration~`or~`0),icon,{r,g,b,a})~J~`~`~`~`elseif~`event=="BigWigs_StopBar"~`then~J~`~`~`~`~`~`~`~`local~`module,~`msg~`=~`...~J~`~`~`~`~`~`~`~`WeakAuras.ScanEvents("PHOGUILD_RAT","STOP",tostring(module).."~}"..(msg~`or~`""),msg,0,icon)~J~`~`~`~`elseif~`(event~`==~`"BigWigs_StopBars"~J~`~`~`~`~`~`~`~`or~`event~`==~`"BigWigs_OnBossDisable"~J~`~`~`~`or~`event~`==~`"BigWigs_OnPluginDisable")~`then~J~`~`~`~`~`~`~`~`local~`module=...~J~`~`~`~`~`~`~`~`WeakAuras.ScanEvents("PHOGUILD_RAT","STOPALL",module)~J~`~`~`~`end~Jend~J~Jif~`BigWigsLoader~`then~J~`~`~`~`PHOGUILD_WA_RAT_BWCallbackObj~`=~`{}~J~`~`~`~`BigWigsLoader.RegisterMessage(PHOGUILD_WA_RAT_BWCallbackObj,~`"BigWigs_StartBar",~`aura_env.BigwigsCallback);~J~`~`~`~`BigWigsLoader.RegisterMessage(PHOGUILD_WA_RAT_BWCallbackObj,~`"BigWigs_StopBar",~`aura_env.BigwigsCallback);~J~`~`~`~`BigWigsLoader.RegisterMessage(PHOGUILD_WA_RAT_BWCallbackObj,~`"BigWigs_StopBars",~`aura_env.BigwigsCallback);~J~`~`~`~`BigWigsLoader.RegisterMessage(PHOGUILD_WA_RAT_BWCallbackObj,~`"BigWigs_OnBossDisable",~`aura_env.BigwigsCallback);~J~`~`~`~`if~`aura_env.hideBWBars~`then~J~`~`~`~`~`~`~`~`local~`f~`=~`function(event,addon,bar,...)~`~J~`~`~`~`~`~`~`~`~`~`~`~`bar.candyBarBar:Hide()~J~`~`~`~`~`~`~`~`~`~`~`~`bar.candyBarIconFrame:Hide()~J~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`BigWigsLoader.RegisterMessage(PHOGUILD_WA_RAT_BWCallbackObj,~`"BigWigs_BarCreated",~`f);~J~`~`~`~`~`~`~`~`BigWigsLoader.RegisterMessage(PHOGUILD_WA_RAT_BWCallbackObj,~`"BigWigs_BarEmphasized",~`f);~J~`~`~`~`end~Jend^Sdo_custom^B^t^t^SfontSize^N12^t^N2^T^SyOffset^N10^Sdesaturate^B^SsameTexture^B^Sadditional_triggers^T^t^SregionType^Saurabar^Scompress^b^SactiveTriggerMode^N-10^Scrop_y^N0.41^SendAngle^N360^Surl^Shttps://wago.io/B1pfxTOtb/23^Stexture^SElvUI~`Norm^SselfPoint^STOP^Sinit_started^N1^SborderColor^T^N1^N0^N2^N0^N3^N0^N4^N1^t^SbackgroundOffset^N2^SborderEdge^S1~`Pixel^SborderInset^N1^Sid^SPhoGuild~`-~`Raid~`Ability~`Timeline~`Backdrop~`ElvUI^Sdesc^SMade~`by:~`Bosmutus~`-~`Zul'jin(US)^Strigger^T^Suse_absorbMode^B^SshowOn^SshowOnActive^Sunevent^Sauto^Scustom^Sfunction(WAevent,~`event,~`id,~`msg,~`exp,~`icon,~`colors)~J~`~`~`~`if~`WAevent~`==~`"PHOGUILD_RAT"~`then~J~`~`~`~`~`~`~`~`if~`event~`==~`"START"~`or~`event=="UPDATEPROG"~`then~J~`~`~`~`~`~`~`~`~`~`~`~`if~`not~`id~`then~`return~`end~J~`~`~`~`~`~`~`~`~`~`~`~`aura_env.timers[id]~`=~`exp~J~`~`~`~`~`~`~`~`~`~`~`~`C_Timer.After(exp-GetTime(),~`function()~`WeakAuras.ScanEvents("PHOGUILD_RAT_EXP","",id)~`end)~J~`~`~`~`~`~`~`~`~`~`~`~`return~`true~J~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`return~`false~J~`~`~`~`end~Jend^Suse_unit^B^Sevents^SPHOGUILD_RAT,PHOGUILD_RAT_EXP^Sevent^SChat~`Message^Stype^Scustom^Scustom_type^Sstatus^Scustom_hide^Stimed^Scheck^Sevent^t^SdesaturateForeground^b^Stext^b^Srotate^B^Suser_y^N0^Sheight^N223^Sactions^T^Sinit^T^Scustom^Saura_env.timers={}^Sdo_custom^B^t^t^Sdiscrete_rotation^N0^Swidth^N27^Sorientation^SVERTICAL^Scolor^T^N1^N1^N2^N1^N3^N1^N4^N0.771618694067^t^Sborder^B^Stimer^b^Sdisjunctive^Sany^Suser_x^N0^SbackgroundColor^T^N1^N0.11764705882353^N2^N0.11764705882353^N3^N0.11764705882353^N4^N0.75629188120365^t^SbarColor^T^N4^N0^t^SfontFlags^SOUTLINE^SstartAngle^N0^Scrop^N0.41^SborderOffset^N1^SblendMode^SADD^SnumTriggers^N1^SborderBackdrop^SNone^SframeStrata^N3^Sicon^b^SdesaturateBackground^b^SbackdropColor^T^N1^N0^N2^N0^N3^N0^N4^N0.64000001549721^t^StextureWrapMode^SCLAMP^SbackgroundTexture^STextures\SpellActivationOverlays\Eclipse_Sun^Sstacks^b^Scrop_x^N0.41^Sload^T^Suse_never^b^Sfaction^T^Smulti^T^t^t^Singroup^T^Smulti^T^t^t^Srace^T^Smulti^T^t^t^Srole^T^Smulti^T^t^t^Spvptalent^T^Smulti^T^t^t^Stalent^T^Smulti^T^t^t^Sdifficulty^T^Smulti^T^t^t^Stalent2^T^Smulti^T^t^t^t^SforegroundColor^T^N1^N1^N2^N1^N3^N1^N4^N1^t^Smirror^b^Suntrigger^T^Scustom^Sfunction(WAevent,~`event,~`id,~`msg,~`exp,~`icon,~`colors)~J~`~`~`~`if~`WAevent~`==~`"PHOGUILD_RAT"~`then~J~`~`~`~`~`~`~`~`if~`event=="STOP"~`then~J~`~`~`~`~`~`~`~`~`~`~`~`if~`not~`id~`then~`return~`end~J~`~`~`~`~`~`~`~`~`~`~`~`aura_env.timers[id]~`=~`nil~J~`~`~`~`~`~`~`~`elseif~`event=="STOPALL"~`then~J~`~`~`~`~`~`~`~`~`~`~`~`for~`cid,cexp~`in~`pairs(aura_env.timers)~`do~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`if~`not~`id~`or~`tostring(id)==strsplit("~}",cid)~`then~`--With~`BW,~`id~`(called~`module~`in~`BW)~`can~`be~`a~`table~`here~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`aura_env.timers[cid]~`=~`nil~J~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`~`~`~`~`end~J~`~`~`~`~`~`~`~`else~`~J~`~`~`~`~`~`~`~`~`~`~`~`return~`false~`~J~`~`~`~`~`~`~`~`end~J~`~`~`~`elseif~`WAevent~`==~`"PHOGUILD_RAT_EXP"~`then~J~`~`~`~`~`~`~`~`~J~`~`~`~`else~`~J~`~`~`~`~`~`~`~`return~`false~`~J~`~`~`~`end~J~`~`~`~`--~`Check~`expiration~J~`~`~`~`local~`hasTimer~`=~`false~J~`~`~`~`local~`now~`=~`GetTime()~J~`~`~`~`for~`cid,cexp~`in~`pairs(aura_env.timers)~`do~J~`~`~`~`~`~`~`~`if~`cexp~`<=~`now~`then~J~`~`~`~`~`~`~`~`~`~`~`~`aura_env.timers[cid]~`=~`nil~J~`~`~`~`~`~`~`~`else~J~`~`~`~`~`~`~`~`~`~`~`~`hasTimer~`=~`true~J~`~`~`~`~`~`~`~`end~J~`~`~`~`end~J~`~`~`~`return~`not~`hasTimer~Jend^t^SforegroundTexture^STextures\SpellActivationOverlays\Eclipse_Sun^Srotation^N90^SborderSize^N1^t^N3^T^Swidth^N32^Sdesaturate^B^Sid^SPhoGuild~`-~`Raid~`Ability~`Timeline~`Backdrop^Sadditional_triggers^T^N1^T^Suntrigger^T^t^Strigger^T^Scustom_hide^Stimed^Sunevent^Sauto^Stype^Sstatus^Sunit^Splayer^Sevent^SBigWigs~`Timer^Suse_unit^B^SsubeventSuffix^S_CAST_START^Suse_addon^b^SsubeventPrefix^SSPELL^t^t^t^Sdisjunctive^Sany^SregionType^Stexture^SactiveTriggerMode^N-10^SselfPoint^STOP^Surl^Shttps://wago.io/B1pfxTOtb/23^SblendMode^SADD^Stexture^SSpells\TEXTURES\Beam_Purple_02^SframeStrata^N3^Sdesc^SMade~`by:~`Bosmutus~`-~`Zul'jin(US)^Sload^T^Suse_never^B^Sfaction^T^Smulti^T^t^t^Singroup^T^Smulti^T^t^t^Srace^T^Smulti^T^t^t^Srole^T^Smulti^T^t^t^Stalent2^T^Smulti^T^t^t^Stalent^T^Smulti^T^t^t^Sdifficulty^T^Smulti^T^t^t^Spvptalent^T^Smulti^T^t^t^t^Scolor^T^N4^N0.771618694067^t^SnumTriggers^N2^Strigger^T^Scustom_hide^Stimed^Sevent^SDBM~`Timer^Stype^Sstatus^Suse_unit^B^Sunevent^Sauto^t^Sactions^T^Sinit^T^Scustom^S~J~J^Sdo_custom^b^t^t^Srotation^N90^t^t^t^^